<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yibo.modules.base.dao.DictKindDao">
    <!-- 在这里存放用户自定义的映射配置（注：DictKindDAO.xml里各节点的ID不能在这里重复出现）  -->
    <!-- 查询树结构数据 -->
    <select id="findTree" resultType="com.yibo.modules.base.entity.DictKind">
        select
            id,
            parent_id,
            dict_name,
            dict_kind,
            dict_sort
        from sys_dict_kind
        where 1 = 1
            and status = 1
        order by dict_sort
    </select>

    <!-- 唯一性校验 -->
    <select id="count" resultType="java.lang.Integer">
        select count(1) from sys_dict_kind
        where 1 = 1
        <if test="condition.dictName != null">
            and dict_name = #{condition.dictName,jdbcType=VARCHAR}
        </if>
        <if test="condition.dictKind != null">
            and dict_kind = #{condition.dictKind,jdbcType=VARCHAR}
        </if>
        <if test="condition.id != null and condition.id.length() > 0">
            and id not in(select #{condition.id})
        </if>
        and status = 1
    </select>
</mapper>